{"version":3,"sources":["../../server/controllers/commentsController.js"],"names":["commentsController","store","req","res","text","body","userId","postId","params","comment","Comment","_creator","_post","save","then","newComment","Post","findByIdAndUpdate","$push","_comments","_id","updatedPost","redirect","catch","err","status","json","errMessage"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAMA,qBAAqB,EAA3B;;AAEAA,mBAAmBC,KAAnB,GAA2B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,MAErCC,IAFqC,GAGnCF,IAAIG,IAH+B,CAErCD,IAFqC;;;AAKvC,MAAME,SAAS,0BAAf;AACA,MAAMC,SAASL,IAAIM,MAAJ,CAAWD,MAA1B;;AAEA,MAAME,UAAU,IAAI,iBAAGC,OAAP,CAAe;AAC7BN,cAD6B;AAE7BO,cAAUL,MAFmB;AAG7BM,WAAOL;AAHsB,GAAf,CAAhB;;AAMAE,UAAQI,IAAR,GACGC,IADH,CACS,UAACC,UAAD,EAAgB;AACrB,qBAAGC,IAAH,CAAQC,iBAAR,CACEV,MADF,EAEE,EAAEW,OAAO,EAAEC,WAAYJ,WAAWK,GAAzB,EAAT,EAFF,EAGEN,IAHF,CAGQ,UAACO,WAAD,EAAiB;AACrBlB,UAAImB,QAAJ,CAAa,MAAb;AACH,KALD,EAKGC,KALH,CAKU,UAACC,GAAD,EAAS;AACfrB,UAAIsB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,oBAAYH;AADO,OAArB;AAGH,KATD;AAUD,GAZH,EAYKD,KAZL,CAYY,UAACC,GAAD,EAAS;AACjBrB,QAAIsB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,kBAAYH;AADO,KAArB;AAGD,GAhBH;AAiBD,CA/BD;;kBAiCexB,kB","file":"commentsController.js","sourcesContent":["import db from '../models';\nconst commentsController = {};\n\ncommentsController.store = (req, res) => {\n  const {\n    text\n  } = req.body;\n\n  const userId = \"598f6051349ed38bfda0b3bc\";\n  const postId = req.params.postId;\n\n  const comment = new db.Comment({\n    text,\n    _creator: userId,\n    _post: postId\n  });\n\n  comment.save()\n    .then( (newComment) => {\n      db.Post.findByIdAndUpdate(\n        postId,\n        { $push: { _comments : newComment._id} }\n      ).then( (updatedPost) => {\n          res.redirect('back');\n      }).catch( (err) => {\n          res.status(500).json({\n            errMessage: err\n          });\n      });\n    }).catch( (err) => {\n      res.status(500).json({\n        errMessage: err\n      });\n    });\n}\n\nexport default commentsController;\n"]}