{"version":3,"sources":["../../server/controllers/usersController.js"],"names":["usersController","signup","req","res","render","register","console","log","body","username","password","user","User","save","then","newUser","catch","err","login","logout","redirect","authenticate","find","result","status","json","errMessage"],"mappings":";;;;;;AAAA;;;;;;AACA,IAAMA,kBAAkB,EAAxB;;AAEAA,gBAAgBC,MAAhB,GAAyB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACrCA,MAAIC,MAAJ,CAAW,aAAX;AACD,CAFD;;AAIAJ,gBAAgBK,QAAhB,GAA2B,UAACH,GAAD,EAAMC,GAAN,EAAc;;AAEvCG,UAAQC,GAAR,CAAY,oBAAZ;;AAFuC,kBAOnCL,IAAIM,IAP+B;AAAA,MAKrCC,QALqC,aAKrCA,QALqC;AAAA,MAMrCC,QANqC,aAMrCA,QANqC;;;AASvC,MAAMC,OAAO,IAAI,iBAAGC,IAAP,CAAY;AACvBH,sBADuB;AAEvBC;AAFuB,GAAZ,CAAb;;AAKAC,OAAKE,IAAL,GACGC,IADH,CACS,UAACC,OAAD,EAAa;AAClBZ,QAAIC,MAAJ,CAAW,iBAAX,EAA6B,EAACO,MAAMI,OAAP,EAA7B;AACD,GAHH,EAIGC,KAJH,CAIU,UAACC,GAAD,EAAS;AACfd,QAAIC,MAAJ,CAAW,aAAX;AACD,GANH;AAOD,CArBD;;AAuBAJ,gBAAgBkB,KAAhB,GAAwB,UAAChB,GAAD,EAAMC,GAAN,EAAc;AACpCG,UAAQC,GAAR,CAAY,wBAAZ;AACAJ,MAAIC,MAAJ,CAAW,YAAX;AACD,CAHD;;AAKAJ,gBAAgBmB,MAAhB,GAAyB,UAACjB,GAAD,EAAMC,GAAN,EAAc;AACrCA,MAAIiB,QAAJ,CAAa,QAAb;AACD,CAFD;;AAIApB,gBAAgBqB,YAAhB,GAA+B,UAACnB,GAAD,EAAMC,GAAN,EAAc;;AAE3CG,UAAQC,GAAR,CAAY,wBAAZ;AAF2C,mBAMvCL,IAAIM,IANmC;AAAA,MAIzCC,QAJyC,cAIzCA,QAJyC;AAAA,MAKzCC,QALyC,cAKzCA,QALyC;;;AAQ3C,mBAAGE,IAAH,CAAQU,IAAR,CAAa,EAACb,kBAAD,EAAWC,kBAAX,EAAb,EACGI,IADH,CACS,UAACS,MAAD,EAAY;AACjBpB,QAAIqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBF,MAArB;AACD,GAHH,EAIGP,KAJH,CAIU,UAACC,GAAD,EAAS;AACfd,QAAIqB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,kBAAYT;AADO,KAArB;AAGD,GARH;AASD,CAjBD;;kBAoBejB,e","file":"usersController.js","sourcesContent":["import db from '../models';\nconst usersController = {};\n\nusersController.signup = (req, res) => {\n  res.render('auth/signup');\n}\n\nusersController.register = (req, res) => {\n\n  console.log('Trying to register');\n\n  let {\n    username,\n    password\n  } = req.body;\n\n  const user = new db.User({\n    username,\n    password\n  });\n\n  user.save()\n    .then( (newUser) => {\n      res.render('auth/registered',{user: newUser});\n    })\n    .catch( (err) => {\n      res.render('auth/signup');\n    });\n}\n\nusersController.login = (req, res) => {\n  console.log('showing the login form');\n  res.render('auth/login');\n}\n\nusersController.logout = (req, res) => {\n  res.redirect('/login');\n}\n\nusersController.authenticate = (req, res) => {\n\n  console.log('trying to authenticate');\n  const {\n    username,\n    password\n  } = req.body;\n\n  db.User.find({username, password})\n    .then( (result) => {\n      res.status(200).json(result);\n    })\n    .catch( (err) => {\n      res.status(500).json({\n        errMessage: err\n      });\n    });\n};\n\n\nexport default usersController;\n"]}