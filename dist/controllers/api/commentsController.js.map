{"version":3,"sources":["../../../server/controllers/api/commentsController.js"],"names":["commentsController","store","req","res","body","text","userId","postId","comment","db","Comment","_creator","_post","save","then","newComment","Post","findByIdAndUpdate","$push","_comments","_id","updatedPost","status","json","success","data","catch","err","errMessage"],"mappings":";;;;;AAAA,IAAMA,qBAAqB,EAA3B;;AAEAA,mBAAmBC,KAAnB,GAA2B,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,kBAKnCD,IAAIE,IAL+B;AAAA,MAErCC,IAFqC,aAErCA,IAFqC;AAAA,MAGrCC,MAHqC,aAGrCA,MAHqC;AAAA,MAIrCC,MAJqC,aAIrCA,MAJqC;;;AAOvC,MAAMC,UAAU,IAAIC,GAAGC,OAAP,CAAe;AAC7BL,cAD6B;AAE7BM,cAAUL,MAFmB;AAG7BM,WAAOL;AAHsB,GAAf,CAAhB;;AAMAC,UAAQK,IAAR,GACGC,IADH,CACS,UAACC,UAAD,EAAgB;AACrBN,OAAGO,IAAH,CAAQC,iBAAR,CACEV,MADF,EAEE,EAAEW,OAAO,EAAEC,WAAYJ,WAAWK,GAAzB,EAAT,EAFF,EAGEN,IAHF,CAGQ,UAACO,WAAD,EAAiB;AACrBlB,UAAImB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBC,iBAAS,IADU;AAEnBC,cAAMV,UAFa;AAGnBM;AAHmB,OAArB;AAKH,KATD,EASGK,KATH,CASU,UAACC,GAAD,EAAS;AACfxB,UAAImB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBK,oBAAYD;AADO,OAArB;AAGH,KAbD;AAcD,GAhBH,EAgBKD,KAhBL,CAgBY,UAACC,GAAD,EAAS;AACjBxB,QAAImB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACnBK,kBAAYD;AADO,KAArB;AAGD,GApBH;AAqBD,CAlCD;;kBAoCe3B,kB","file":"commentsController.js","sourcesContent":["const commentsController = {};\n\ncommentsController.store = (req, res) => {\n  const {\n    text,\n    userId,\n    postId\n  } = req.body;\n\n  const comment = new db.Comment({\n    text,\n    _creator: userId,\n    _post: postId\n  });\n\n  comment.save()\n    .then( (newComment) => {\n      db.Post.findByIdAndUpdate(\n        postId,\n        { $push: { _comments : newComment._id} }\n      ).then( (updatedPost) => {\n          res.status(200).json({\n            success: true,\n            data: newComment,\n            updatedPost\n          });\n      }).catch( (err) => {\n          res.status(500).json({\n            errMessage: err\n          });\n      });\n    }).catch( (err) => {\n      res.status(500).json({\n        errMessage: err\n      });\n    });\n}\n\nexport default commentsController;\n"]}